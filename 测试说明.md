# DDS通信测试说明

## 项目结构

### CarSimulator模块
- `CarSimulator.java` - 主车辆模拟器
- `DDS/VehicleCommandReceiver.java` - 专门处理手机App命令的接收器
- `CarSimulatorPublication.java` - 车辆状态发布器

### AppTest模块  
- `MobileAppSimulator.java` - 手机App模拟器
- `DDS/AppCommandPublisher.java` - 手机App命令发布器
- `DDS/AppStatusSubscriber.java` - 手机App状态订阅器

## 测试步骤

### 1. 启动车辆模拟器
```bash
cd CarSimulator
mvn compile exec:java -Dexec.mainClass="CarSimulator.CarSimulator"
```

### 2. 启动手机App模拟器（新终端）
```bash
cd AppTest  
mvn compile exec:java -Dexec.mainClass="AppSimulator.MobileAppSimulator"
```

### 3. 手机App操作命令
在AppTest终端中输入：
- `1` - 启动发动机
- `2` - 熄火发动机  
- `3` - 锁定车门
- `4` - 解锁车门
- `5` - 设置油量（然后输入0-100的值）
- `6` - 设置位置（然后输入位置字符串）
- `7` - 查看当前车辆状态
- `0` - 退出

### 4. 验证通信
- 手机App发送命令后，CarSimulator应显示接收到的命令
- CarSimulator状态变化后，手机App应显示更新后的车辆状态
- 两个终端都能看到实时通信日志

## Topic配置

- **车辆状态发布**: `VehicleStatusTopic`
- **命令接收**: `VehicleCommandTopic`
- **Domain ID**: 80（两个模块必须一致）

## 注意事项

1. 确保DDS库文件已正确配置在lib目录
2. 两个模块必须在同一网络环境
3. 如果通信失败，检查防火墙设置
4. 日志中会显示详细的通信状态信息